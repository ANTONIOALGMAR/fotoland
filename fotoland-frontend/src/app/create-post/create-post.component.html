<app-nav-header
  [title]="isEditMode ? 'Editar Post' : 'Criar Post'"
  (navigatePrivate)="irParaPrivado()"
  (navigateGroup)="irParaColetivo()"
  (cancel)="cancelar()"
  (back)="voltar()"
></app-nav-header>

<div class="background-slideshow">
  <div class="slide" style="background-image: url('assets/futuristic-background.jpg');"></div>
  <div class="slide" style="background-image: url('assets/futuristic-background2.jpg');"></div>
  <div class="slide" style="background-image: url('assets/futuristic-background3.jpg');"></div>
</div>

<div class="create-post-container">
  <div class="create-post-form">
    <h2>Create New Post</h2>
    <form (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="album">Select Album</label>
        <select id="album" name="album" [(ngModel)]="selectedAlbumId" required>
          <option *ngFor="let album of albums" [value]="album.id">{{ album.title }} ({{ album.type }})</option>
        </select>
      </div>

      <div class="form-group">
        <label for="postType">Post Type</label>
        <select id="postType" name="postType" [(ngModel)]="post.type" required>
          <option *ngFor="let type of postTypes" [value]="type">{{ type }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="mediaFile">Media File</label>
        <input type="file" id="mediaFile" (change)="onFileSelected($event)" hidden #mediaFileInput>
        <button type="button" class="btn-outline" (click)="mediaFileInput.click()">Choose Media</button>
        <div *ngIf="selectedFileName" class="file-info">
          <span>{{ selectedFileName }}</span>
          <img *ngIf="mediaPreview && post.type === PostType.PHOTO" [src]="mediaPreview" class="media-preview">
          <video *ngIf="mediaPreview && post.type === PostType.VIDEO" [src]="mediaPreview" controls class="media-preview"></video>
        </div>
      </div>

      <div class="form-group">
        <label for="caption">Caption</label>
        <textarea id="caption" name="caption" [(ngModel)]="post.caption"></textarea>
      </div>

      <button type="submit">Create Post</button>
    </form>
  </div>
</div>
