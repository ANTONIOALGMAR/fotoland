<div class="chat-container">
  <h2>Chat Privado</h2>

  <div class="room-actions">
    <input [(ngModel)]="newRoomName" type="text" placeholder="Nome da sala" />
    <button (click)="createRoom()" [disabled]="!newRoomName.trim()">Criar sala</button>
  </div>

  <div class="rooms-list">
    <h3>Minhas salas</h3>
    <div *ngFor="let r of rooms">
      <button (click)="joinRoom(r.id)">{{ r.room.name }} (ID {{ r.id }})</button>
    </div>
  </div>

  <div *ngIf="selectedRoomId">
    <h3>Sala atual: {{ selectedRoomId }}</h3>
    <div class="invite">
      <input [(ngModel)]="inviteUsername" type="text" placeholder="Convidar usuário (nickname)" />
      <button (click)="invite()" [disabled]="!inviteUsername.trim()">Convidar</button>
    </div>

    <div *ngIf="connecting" class="status">Conectando à sala...</div>

    <div class="messages">
      <div *ngFor="let m of messages" class="message">
        <span class="sender">{{ m.sender || 'Anônimo' }}</span>
        <span class="content">{{ m.content }}</span>
        <span class="time">{{ m.timestamp | date:'shortTime' }}</span>
      </div>
    </div>

    <div class="composer">
      <input [(ngModel)]="newMessage" type="text" placeholder="Digite uma mensagem..." />
      <button (click)="send()" [disabled]="!newMessage.trim()">Enviar</button>
    </div>
  </div>
</div>